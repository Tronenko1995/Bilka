!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t){var r,i,o,n=arguments.length,s=window[t],a=arguments,f=a[1];if(2>n)throw Error("Minimum 2 arguments must be given");if(e.isArray(f)){i={};for(var u in f){r=f[u];try{i[r]=JSON.parse(s.getItem(r))}catch(c){i[r]=s.getItem(r)}}return i}if(2!=n){try{i=JSON.parse(s.getItem(f))}catch(c){throw new ReferenceError(f+" is not defined in this storage")}for(var u=2;n-1>u;u++)if(i=i[a[u]],void 0===i)throw new ReferenceError([].slice.call(a,1,u+1).join(".")+" is not defined in this storage");if(e.isArray(a[u])){o=i,i={};for(var h in a[u])i[a[u][h]]=o[a[u][h]];return i}return i[a[u]]}try{return JSON.parse(s.getItem(f))}catch(c){return s.getItem(f)}}function r(t){var r,i,o=arguments.length,n=window[t],s=arguments,a=s[1],f=s[2],u={};if(2>o||!e.isPlainObject(a)&&3>o)throw Error("Minimum 3 arguments must be given or second parameter must be an object");if(e.isPlainObject(a)){for(var c in a)r=a[c],e.isPlainObject(r)?n.setItem(c,JSON.stringify(r)):n.setItem(c,r);return a}if(3==o)return"object"==typeof f?n.setItem(a,JSON.stringify(f)):n.setItem(a,f),f;try{i=n.getItem(a),null!=i&&(u=JSON.parse(i))}catch(h){}i=u;for(var c=2;o-2>c;c++)r=s[c],i[r]&&e.isPlainObject(i[r])||(i[r]={}),i=i[r];return i[s[c]]=s[c+1],n.setItem(a,JSON.stringify(u)),u}function i(t){var r,i,o=arguments.length,n=window[t],s=arguments,a=s[1];if(2>o)throw Error("Minimum 2 arguments must be given");if(e.isArray(a)){for(var f in a)n.removeItem(a[f]);return!0}if(2==o)return n.removeItem(a),!0;try{r=i=JSON.parse(n.getItem(a))}catch(u){throw new ReferenceError(a+" is not defined in this storage")}for(var f=2;o-1>f;f++)if(i=i[s[f]],void 0===i)throw new ReferenceError([].slice.call(s,1,f).join(".")+" is not defined in this storage");if(e.isArray(s[f]))for(var c in s[f])delete i[s[f][c]];else delete i[s[f]];return n.setItem(a,JSON.stringify(r)),!0}function o(t,r){var o=a(t);for(var n in o)i(t,o[n]);if(r)for(var n in e.namespaceStorages)f(n)}function n(r){var i=arguments.length,o=arguments,s=(window[r],o[1]);if(1==i)return 0==a(r).length;if(e.isArray(s)){for(var f=0;f<s.length;f++)if(!n(r,s[f]))return!1;return!0}try{var u=t.apply(this,arguments);e.isArray(o[i-1])||(u={totest:u});for(var f in u)if(!(e.isPlainObject(u[f])&&e.isEmptyObject(u[f])||e.isArray(u[f])&&!u[f].length)&&u[f])return!1;return!0}catch(c){return!0}}function s(r){var i=arguments.length,o=arguments,n=(window[r],o[1]);if(2>i)throw Error("Minimum 2 arguments must be given");if(e.isArray(n)){for(var a=0;a<n.length;a++)if(!s(r,n[a]))return!1;return!0}try{var f=t.apply(this,arguments);e.isArray(o[i-1])||(f={totest:f});for(var a in f)if(void 0===f[a]||null===f[a])return!1;return!0}catch(u){return!1}}function a(r){var i=arguments.length,o=window[r],n=arguments,s=(n[1],[]),a={};if(a=i>1?t.apply(this,n):o,a._cookie)for(var f in e.cookie())""!=f&&s.push(f.replace(a._prefix,""));else for(var u in a)s.push(u);return s}function f(t){if(!t||"string"!=typeof t)throw Error("First parameter must be a string");l?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var r={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return e.cookie&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),r.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=r,r}function u(e){if(!window[e])return!1;var t="jsapi";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(r){return!1}}var c="ls_",h="ss_",l=u("localStorage"),m={_type:"",_ns:"",_callMethod:function(e,t){var r=[this._type],t=Array.prototype.slice.call(t),i=t[0];return this._ns&&r.push(this._ns),"string"==typeof i&&-1!==i.indexOf(".")&&(t.shift(),[].unshift.apply(t,i.split("."))),[].push.apply(r,t),e.apply(this,r)},get:function(){return this._callMethod(t,arguments)},set:function(){var t=arguments.length,i=arguments,o=i[0];if(1>t||!e.isPlainObject(o)&&2>t)throw Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(o)&&this._ns){for(var n in o)r(this._type,this._ns,n,o[n]);return o}var s=this._callMethod(r,i);return this._ns?s[o.split(".")[0]]:s},remove:function(){if(arguments.length<1)throw Error("Minimum 1 argument must be given");return this._callMethod(i,arguments)},removeAll:function(e){return this._ns?(r(this._type,this._ns,{}),!0):o(this._type,e)},isEmpty:function(){return this._callMethod(n,arguments)},isSet:function(){if(arguments.length<1)throw Error("Minimum 1 argument must be given");return this._callMethod(s,arguments)},keys:function(){return this._callMethod(a,arguments)}};if(e.cookie){window.name||(window.name=Math.floor(1e8*Math.random()));var g={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(t,r){e.cookie(this._prefix+t,r,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(t){return e.cookie(this._prefix+t)},removeItem:function(t){return e.removeCookie(this._prefix+t)},clear:function(){for(var t in e.cookie())""!=t&&(!this._prefix&&-1===t.indexOf(c)&&-1===t.indexOf(h)||this._prefix&&0===t.indexOf(this._prefix))&&e.removeCookie(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};l||(window.localCookieStorage=e.extend({},g,{_prefix:c,_expires:3650}),window.sessionCookieStorage=e.extend({},g,{_prefix:h+window.name+"_"})),window.cookieStorage=e.extend({},g),e.cookieStorage=e.extend({},m,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return f(e)},l?(e.localStorage=e.extend({},m,{_type:"localStorage"}),e.sessionStorage=e.extend({},m,{_type:"sessionStorage"})):(e.localStorage=e.extend({},m,{_type:"localCookieStorage"}),e.sessionStorage=e.extend({},m,{_type:"sessionCookieStorage"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})}});
!function(e){void 0==e.fn.bzinputmask&&(e.bzinputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,isComplete:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnHover:!0,numericInput:!1,radixPoint:".",definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:e.fn.val},e.fn.bzinputmask=function(t,n){function a(e){var t=document.createElement("input"),e="on"+e,n=e in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),t=null,n}function i(t){var a=M.aliases[t];return!!a&&(a.alias&&i(a.alias),e.extend(!0,M,a),e.extend(!0,M,n),!0)}function r(){var t=!1,n=0;1==M.mask.length&&0==M.greedy&&(M.placeholder="");for(var a=e.map(M.mask.split(""),function(e,a){var i=[];if(e==M.escapeChar)t=!0;else if(e!=M.optionalmarker.start&&e!=M.optionalmarker.end||t){var r=M.definitions[e];if(r&&!t)for(var s=0;s<r.cardinality;s++)i.push(f(n+s));else i.push(e),t=!1;return n+=i.length,i}}),i=a.slice(),r=1;r<M.repeat&&M.greedy;r++)i=i.concat(a.slice());return i}function s(){var t=!1,n=!1,a=!1;return e.map(M.mask.split(""),function(e,i){var r=[];if(e==M.escapeChar)n=!0;else if(e!=M.optionalmarker.start||n){if(e!=M.optionalmarker.end||n){var s=M.definitions[e];if(s&&!n){for(var u=s.prevalidator,o=u?u.length:0,l=1;l<s.cardinality;l++){var f=o>=l?u[l-1]:[],c=f.validator,d=f.cardinality;r.push({fn:c?"string"==typeof c?new RegExp(c):new function(){this.test=c}:new RegExp("."),cardinality:d?d:1,optionality:t,newBlockMarker:1==t&&a,offset:0,casing:s.casing,def:e}),1==t&&(a=!1)}r.push({fn:s.validator?"string"==typeof s.validator?new RegExp(s.validator):new function(){this.test=s.validator}:new RegExp("."),cardinality:s.cardinality,optionality:t,newBlockMarker:a,offset:0,casing:s.casing,def:e})}else r.push({fn:null,cardinality:0,optionality:t,newBlockMarker:a,offset:0,casing:null,def:e}),n=!1;return a=!1,r}t=!1,a=!0}else t=!0,a=!0})}function u(e,t,n,a){if(e<0||e>=c())return!1;for(var i=l(e),r=t?1:0,s="",u=w[i].cardinality;u>r;u--)s+=m(n,i-(u-1));return t&&(s+=t),null!=w[i].fn&&w[i].fn.test(s,n,e,a,M)}function o(e){var t=l(e),n=w[t];return void 0!=n&&n.fn}function l(e){return e%w.length}function f(e){return M.placeholder.charAt(e%M.placeholder.length)}function c(){var e=x.length;return!M.greedy&&M.repeat>1&&(e+=x.length*(M.repeat-1)),e}function d(e,t){var n=c();if(t>=n)return n;for(var a=t;++a<n&&!o(a););return a}function p(e,t){var n=t;if(n<=0)return 0;for(;--n>0&&!o(n););return n}function v(e,t,n){var a=w[l(t)],i=n;if(void 0!=i)switch(a.casing){case"upper":i=n.toUpperCase();break;case"lower":i=n.toLowerCase()}e[t]=i}function m(e,t,n){return n&&(t=h(e,t)),e[t]}function h(e,t,n){var a;if(n)for(;t<0&&e.length<c();)for(a=x.length-1,t=x.length;void 0!==x[a];)e.unshift(x[a--]);else for(;void 0==e[t]&&e.length<c();)for(a=0;void 0!==x[a];)e.push(x[a++]);return t}function g(e,t,n){e._valueSet(t.join("")),void 0!=n&&(T?setTimeout(function(){G(e,n)},100):G(e,n))}function k(e,t,n){for(var a=t,i=c();a<n&&a<i;a++)v(e,a,m(x.slice(),a))}function b(e,t){var n=l(t);v(e,t,m(x,n))}function _(t,n,a,i){var r=e(t).data("bzinputmask").isRTL,s=z(t._valueGet(),r).split("");if(r){var p=c(),h=s.reverse();h.length=p;for(var _=0;_<p;_++){var y=l(p-(_+1));null==w[y].fn&&h[_]!=m(x,y)?(h.splice(_,0,m(x,y)),h.length=p):h[_]=h[_]||m(x,y)}s=h.reverse()}k(n,0,n.length),n.length=x.length;for(var C,E=-1,G=-1,p=c(),A=s.length,P=0==A?p:-1,_=0;_<A;_++)for(var S=G+1;S<p;S++){if(o(S)){var T=s[_];(C=u(S,T,n,!a))!==!1?(C!==!0&&(S=C.pos||S,T=C.c||T),v(n,S,T),E=G=S):(b(n,S),T==f(S)&&(G=S,P=S));break}if(b(n,S),E==G&&(E=S),G=S,s[_]==m(n,S))break}if(0==M.greedy)for(var D=z(n.join(""),r).split("");n.length!=D.length;)r?n.shift():n.pop();return a&&g(t,n),r?M.numericInput?e.inArray(M.radixPoint,n)!=-1&&i!==!0?e.inArray(M.radixPoint,n):d(n,p):d(n,P):d(n,E)}function y(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")}function z(e,t){return t?e.replace(new RegExp("^("+y(x.join(""))+")*"),""):e.replace(new RegExp("("+y(x.join(""))+")*$"),"")}function C(t,n){_(t,n,!1);var a=n.slice();if(e(t).data("bzinputmask").isRTL)for(var i=0;i<=a.length-1;i++){var r=l(i);if(!w[r].optionality)break;if(f(i)!=n[i]&&o(i))break;a.splice(0,1)}else for(var i=a.length-1;i>=0;i--){var r=l(i);if(!w[r].optionality)break;if(f(i)!=n[i]&&o(i))break;a.pop()}g(t,a)}function E(t,n){var a=t[0];if(!w||n!==!0&&t.hasClass("hasDatepicker"))return a._valueGet();var i=x.slice();return _(a,i),e.map(i,function(e,t){return o(t)&&e!=m(x.slice(),t)?e:null}).join("")}function G(e,t,n){var a=e.jquery&&e.length>0?e[0]:e;if("number"!=typeof t){var i=T?r:null,r=null;if(null==i){if(a.setSelectionRange)t=a.selectionStart,n=a.selectionEnd;else if(document.selection&&document.selection.createRange){var s=document.selection.createRange();t=0-s.duplicate().moveStart("character",-1e5),n=t+s.text.length}i={begin:t,end:n}}return i}if(n="number"==typeof n?n:t,0==M.insertMode&&t==n&&n++,a.setSelectionRange)a.setSelectionRange(t,n);else if(a.createTextRange){var s=a.createTextRange();s.collapse(!0),s.moveEnd("character",n),s.moveStart("character",t),s.select()}a.focus(),T&&n!=a.selectionEnd&&(r={begin:t,end:n})}function A(t){function n(e){for(var t=!0,n=e._valueGet(),a=n.length,i=0;i<a;i++)if(o(i)&&n.charAt(i)==f(i)){t=!1;break}return t}function a(t){var n=e._data(t).events;e.each(n,function(n,a){e(t).bind(n+".bzinputmask",function(e){if(this.readOnly||this.disabled)return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1});for(var i=a[a.length-1],r=a.length-1;r>0;r--)a[r]=a[r-1];a[0]=i})}function i(t){var n;Object.getOwnPropertyDescriptor&&(n=Object.getOwnPropertyDescriptor(t,"value")),n&&n.get?t._valueGet||(t._valueGet=n.get,t._valueSet=n.set,Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("bzinputmask");return n&&n.autoUnmask?t.bzinputmask("unmaskedvalue"):this._valueGet()!=n._buffer.join("")?this._valueGet():""},set:function(t){this._valueSet(t),e(this).triggerHandler("setvalue.bzinputmask")}})):document.__lookupGetter__&&t.__lookupGetter__("value")?t._valueGet||(t._valueGet=t.__lookupGetter__("value"),t._valueSet=t.__lookupSetter__("value"),t.__defineGetter__("value",function(){var t=e(this),n=e(this).data("bzinputmask");return n&&n.autoUnmask?t.bzinputmask("unmaskedvalue"):this._valueGet()!=n._buffer.join("")?this._valueGet():""}),t.__defineSetter__("value",function(t){this._valueSet(t),e(this).triggerHandler("setvalue.bzinputmask")})):(t._valueGet||(t._valueGet=function(){return this.value},t._valueSet=function(e){this.value=e}),1!=e.fn.val.inputmaskpatch&&(e.fn.val=function(){if(0==arguments.length){var t=e(this);if(t.data("bzinputmask")){if(t.data("bzinputmask").autoUnmask)return t.bzinputmask("unmaskedvalue");var n=e.bzinputmask.val.apply(t);return n!=t.data("bzinputmask")._buffer.join("")?n:""}return e.bzinputmask.val.apply(t)}var a=arguments;return this.each(function(){var t=e(this),n=e.bzinputmask.val.apply(t,a);return t.data("bzinputmask")&&t.triggerHandler("setvalue.bzinputmask"),n})},e.extend(e.fn.val,{inputmaskpatch:!0})))}function r(e,t,n){for(;!o(e)&&e-1>=0;)e--;for(var a=e;a<t&&a<c();a++)if(o(a)){b(R,a);var i=d(R,a),r=m(R,i);if(r!=f(i)){if(i<c()&&u(a,r,R,!0)!==!1&&w[l(a)].def==w[l(i)].def)v(R,a,m(R,i)),b(R,i);else if(o(a))break}else if(void 0==n)break}else b(R,a);return void 0!=n&&v(R,K?t:p(R,t),n),R=z(R.join(""),K).split(""),0==R.length&&(R=x.slice()),e}function s(e,t,n,a){for(var i=e;i<=t&&i<c();i++)if(o(i)){var r=m(R,i);if(v(R,i,n),r!=f(i)){var s=d(R,i);if(!(s<c()))break;if(u(s,r,R,!0)!==!1&&w[l(i)].def==w[l(s)].def)n=r;else{if(o(s))break;n=r}}else if(a!==!0)break}else b(R,i);var p=R.length;return R=z(R.join(""),K).split(""),0==R.length&&(R=x.slice()),t-(p-R.length)}function y(t){j=!1;var n=this,a=t.keyCode,i=G(n);if(M.numericInput){var u=n._valueGet(),o=u.indexOf(M.radixPoint);o!=-1&&(K=i.begin<=o||i.end<=o)}if(a==M.keyCode.BACKSPACE||a==M.keyCode.DELETE||S&&127==a){var l=c();if(0==i.begin&&i.end==l)R=x.slice(),g(n,R),G(n,_(n,R,!1));else if(i.end-i.begin>1||i.end-i.begin==1&&M.insertMode)k(R,i.begin,i.end),g(n,R,K?_(n,R,!1):i.begin);else{var p=i.begin-(a==M.keyCode.DELETE?0:1);p<N&&a==M.keyCode.DELETE&&(p=N),p>=N&&(M.numericInput&&M.greedy&&a==M.keyCode.DELETE&&R[p]==M.radixPoint&&(p=d(R,p),K=!1),K?(p=s(N,p,f(p),!0),p=M.numericInput&&M.greedy&&a==M.keyCode.BACKSPACE&&R[p+1]==M.radixPoint?p+1:d(R,p)):p=r(p,l),g(n,R,p))}return n._valueGet()==x.join("")&&e(n).trigger("cleared"),!1}if(a==M.keyCode.END||a==M.keyCode.PAGE_DOWN)return setTimeout(function(){var e=_(n,R,!1,!0);M.insertMode||e!=c()||t.shiftKey||e--,G(n,t.shiftKey?i.begin:e,e)},0),!1;if(a==M.keyCode.HOME||a==M.keyCode.PAGE_UP)return G(n,0,t.shiftKey?i.begin:0),!1;if(a==M.keyCode.ESCAPE)return n._valueSet(I),G(n,0,_(n,R)),!1;if(a==M.keyCode.INSERT)return M.insertMode=!M.insertMode,G(n,M.insertMode||i.begin!=c()?i.begin:i.begin-1),!1;if(t.ctrlKey&&88==a)setTimeout(function(){G(n,_(n,R,!0))},0);else if(!M.insertMode){if(a==M.keyCode.RIGHT){var v=i.begin==i.end?i.end+1:i.end;return v=v<c()?v:i.end,G(n,t.shiftKey?i.begin:v,t.shiftKey?v+1:v),!1}if(a==M.keyCode.LEFT){var v=i.begin-1;return v=v>0?v:0,G(n,v,t.shiftKey?i.end:v),!1}}M.onKeyDown.call(this,t,M),L=e.inArray(a,M.ignorables)!=-1}function E(t){if(j)return!1;j=!0;var a=this,i=e(a);t=t||window.event;var o=t.which||t.charCode||t.keyCode;if(M.numericInput&&o==M.radixPoint.charCodeAt(M.radixPoint.length-1)){var l=a._valueGet(),b=l.indexOf(M.radixPoint);G(a,d(R,b!=-1?b:c()))}if(t.ctrlKey||t.altKey||t.metaKey||L)return!0;if(o){i.trigger("input");var _=G(a),y=String.fromCharCode(o),z=c();if(k(R,_.begin,_.end),K){var C,E=M.numericInput?_.end:p(R,_.end);if((C=u(E==z||m(R,E)==M.radixPoint?p(R,E):E,y,R,!1))!==!1){C!==!0&&(E=C.pos||_,y=C.c||y);var A=N;if(1==M.insertMode){if(1==M.greedy)for(var P=R.slice();m(P,A,!0)!=f(A)&&A<=E;)A=A==z?z+1:d(R,A);if(!(A<=E&&(M.greedy||R.length<z)))return!1;if(R[N]!=f(N)&&R.length<z){var S=h(R,-1,K);0!=_.end&&(E+=S),z=R.length}r(A,M.numericInput?p(R,E):E,y)}else v(R,M.numericInput?p(R,E):E,y);g(a,R,M.numericInput&&0==E?d(R,E):E),setTimeout(function(){n(a)&&i.trigger("complete")},0)}else T&&g(a,R,_.begin)}else{var C,E=d(R,_.begin-1);if(h(R,E,K),(C=u(E,y,R,!1))!==!1){if(C!==!0&&(E=C.pos||E,y=C.c||y),1==M.insertMode){for(var D=c(),P=R.slice();m(P,D,!0)!=f(D)&&D>=E;)D=0==D?-1:p(R,D);if(!(D>=E))return!1;s(E,R.length,y)}else v(R,E,y);var O=d(R,E);g(a,R,O),setTimeout(function(){n(a)&&i.trigger("complete")},0)}else T&&g(a,R,_.begin)}return!1}}function A(t){var a=e(this),i=this,r=t.keyCode;a.trigger("isComplete",n(i)),M.onKeyUp.call(this,t,M),r==M.keyCode.TAB&&a.hasClass("focus.bzinputmask")&&0==i._valueGet().length&&(R=x.slice(),g(i,R),K||G(i,0),I=i._valueGet())}var D=e(t);if(D.is(":input")){M.greedy=M.greedy?M.greedy:0==M.repeat;var O=D.prop("maxLength");c()>O&&O>-1&&(O<x.length&&(x.length=O),0==M.greedy&&(M.repeat=Math.round(O/x.length))),D.prop("maxLength",2*c()),D.data("bzinputmask",{tests:w,_buffer:x,greedy:M.greedy,repeat:M.repeat,autoUnmask:M.autoUnmask,definitions:M.definitions,isRTL:!1}),i(t);var R=x.slice(),I=t._valueGet(),j=!1,L=!1,U=-1,N=d(R,-1),K=(p(R,c()),!1);if("rtl"==t.dir||M.numericInput){t.dir="ltr",D.css("text-align","right"),D.removeAttr("dir");var H=D.data("bzinputmask");H.isRTL=!0,D.data("bzinputmask",H),K=!0}D.unbind(".bzinputmask"),D.removeClass("focus.bzinputmask"),D.bind("mouseenter.bzinputmask",function(){var t=e(this),n=this;if(!t.hasClass("focus.bzinputmask")&&M.showMaskOnHover){var a=n._valueGet().length;a<R.length&&(0==a&&(R=x.slice()),g(n,R))}}).bind("blur.bzinputmask",function(){var t=e(this),a=this,i=a._valueGet();t.removeClass("focus.bzinputmask"),i!=I&&t.change(),M.clearMaskOnLostFocus&&(i==x.join("")?a._valueSet(""):C(a,R)),n(a)||(t.trigger("incomplete"),M.clearIncomplete&&(M.clearMaskOnLostFocus?a._valueSet(""):(R=x.slice(),g(a,R))))}).bind("focus.bzinputmask",function(){var t=e(this),n=this;if(!t.hasClass("focus.bzinputmask")&&!M.showMaskOnHover){var a=n._valueGet().length;a<R.length&&(0==a&&(R=x.slice()),G(n,_(n,R,!0)))}t.addClass("focus.bzinputmask"),I=n._valueGet()}).bind("mouseleave.bzinputmask",function(){var t=e(this),n=this;M.clearMaskOnLostFocus&&(t.hasClass("focus.bzinputmask")||(n._valueGet()==x.join("")||""==n._valueGet()?n._valueSet(""):C(n,R)))}).bind("click.bzinputmask",function(){var e=this;setTimeout(function(){var t=G(e);if(t.begin==t.end){var n=t.begin;U=_(e,R,!1),K?G(e,n>U&&(u(n,R[n],R,!0)!==!1||!o(n))?n:U):G(e,n<U&&(u(n,R[n],R,!0)!==!1||!o(n))?n:U)}},0)}).bind("dblclick.bzinputmask",function(){var e=this;setTimeout(function(){G(e,0,U)},0)}).bind("keydown.bzinputmask",y).bind("keypress.bzinputmask",E).bind("keyup.bzinputmask",A).bind(P+".bzinputmask, dragdrop.bzinputmask, drop.bzinputmask",function(){var e=this;setTimeout(function(){G(e,_(e,R,!0))},0)}).bind("setvalue.bzinputmask",function(){var e=this;I=e._valueGet(),_(e,R,!0),e._valueGet()==x.join("")&&e._valueSet("")}).bind("complete.bzinputmask",M.oncomplete).bind("incomplete.bzinputmask",M.onincomplete).bind("cleared.bzinputmask",M.oncleared).bind("isComplete.bzinputmask",M.isComplete),U=_(t,R,!0);var B;try{B=document.activeElement}catch(F){}B===t?(D.addClass("focus.bzinputmask"),G(t,U)):M.clearMaskOnLostFocus&&(t._valueGet()==x.join("")?t._valueSet(""):C(t,R)),a(t)}}var M=e.extend(!0,{},e.bzinputmask.defaults,n),P=a("paste")?"paste":"input",S=null!=navigator.userAgent.match(/iphone/i),T=null!=navigator.userAgent.match(/android.*mobile safari.*/i);if(T){var D=navigator.userAgent.match(/mobile safari.*/i),O=parseInt(new RegExp(/[0-9]+/).exec(D));T=O<=533}if("string"==typeof t)switch(t){case"mask":var x=r(),w=s();return this.each(function(){A(this)});case"isComplete":return!1;case"unmaskedvalue":var w=this.data("bzinputmask").tests,x=this.data("bzinputmask")._buffer;return M.greedy=this.data("bzinputmask").greedy,M.repeat=this.data("bzinputmask").repeat,M.definitions=this.data("bzinputmask").definitions,E(this);case"remove":var w,x;return this.each(function(){var t=e(this),n=this;setTimeout(function(){if(t.data("bzinputmask")){w=t.data("bzinputmask").tests,x=t.data("bzinputmask")._buffer,M.greedy=t.data("bzinputmask").greedy,M.repeat=t.data("bzinputmask").repeat,M.definitions=t.data("bzinputmask").definitions,n._valueSet(E(t,!0)),t.removeData("bzinputmask"),t.unbind(".bzinputmask"),t.removeClass("focus.bzinputmask");var e;Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(n,"value")),e&&e.get?n._valueGet&&Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet}):document.__lookupGetter__&&n.__lookupGetter__("value")&&n._valueGet&&(n.__defineGetter__("value",n._valueGet),n.__defineSetter__("value",n._valueSet)),delete n._valueGet,delete n._valueSet}},0)});case"getemptymask":return this.data("bzinputmask")?this.data("bzinputmask")._buffer.join(""):"";case"hasMaskedValue":return!!this.data("bzinputmask")&&!this.data("bzinputmask").autoUnmask;default:i(t)||(M.mask=t);var x=r(),w=s();return this.each(function(){A(this)})}if("object"==typeof t){M=e.extend(!0,{},e.bzinputmask.defaults,t),i(M.alias);var x=r(),w=s();return this.each(function(){A(this)})}})}(jQuery);
!function(t){t.masksLoad=function(e){var n;return t.ajax({url:e,async:!1,dataType:"json",success:function(t){n=t}}),n},t.masksSort=function(e,n,i,a){return e.sort(function(e,r){for(var s=0,c=0;s<e[a].length&&c<r[a].length;){var u=e[a].charAt(s),l=r[a].charAt(c);if(i.test(u))if(i.test(l)){if(t.inArray(u,n)!=-1&&t.inArray(l,n)==-1)return 1;if(t.inArray(u,n)==-1&&t.inArray(l,n)!=-1)return-1;if(t.inArray(u,n)==-1&&t.inArray(l,n)==-1&&u!=l)return u<l?-1:1;s++,c++}else c++;else s++}for(;s<e[a].length||c<r[a].length;)if(s<e[a].length&&!i.test(e[a].charAt(s)))s++;else if(c<r[a].length&&!i.test(r[a].charAt(c)))c++;else{if(s<e[a].length)return 1;if(c<r[a].length)return-1}return 0}),e},t.fn.bzinputmasks=function(e,n){var i=function(t,e){if("number"!=typeof t){if(this.setSelectionRange)t=this.selectionStart,e=this.selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length}return{begin:t,end:e}}if(e="number"==typeof e?e:t,this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select()}},a=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)e[e.length]=n;return e};e=t.extend(!0,{onMaskChange:t.noop},e);var r={};for(var s in e.bzinputmask.definitions){var c=e.bzinputmask.definitions[s].validator;switch(typeof c){case"string":r[s]=new RegExp(c);break;case"object":"test"in e.definitions[s].validator&&(r[s]=c);break;case"function":r[s]={test:c}}}e.bzinputmask.definitions[e.replace]={validator:e.match.source,cardinality:1};var u=null!=navigator.userAgent.match(/iphone/i),l=!1,o=t.extend(!0,{},t.bzinputmask.defaults,e.bzinputmask).placeholder,h=t.extend(!0,{},t.bzinputmask.defaults,e.bzinputmask).insertMode,d=function(t){for(var n="",i=0;i<t.length;i++){var s=t.charAt(i);if(s==o)break;e.match.test(s)&&(n+=s)}for(var c in e.list){for(var u=e.list[c][e.listKey],l=!0,h=0,d=0;h<n.length&&d<u.length;){var b=u.charAt(d),f=n.charAt(h);if(e.match.test(b)||b in r){if(!(b in r&&r[b].test(f)||f==b)){l=!1;break}h++,d++}else d++}if(l&&h==n.length){var p=u.substr(d).search(e.match)==-1;u=u.replace(new RegExp([e.match.source].concat(a(r)).join("|"),"g"),e.replace);var m=u.substr(d).search(e.replace)==-1;return{mask:u,obj:e.list[c],determined:p,completed:m}}}return!1},b=function(t,n,i){if(!t)return 0;for(var a=0,r=0;a<i.begin;a++)t.charAt(a)==e.replace&&r++;for(var s=0;a<i.end;a++)t.charAt(a)==e.replace&&s++;for(a=0;a<n.length&&(r>0||n.charAt(a)!=e.replace);a++)n.charAt(a)==e.replace&&r--;for(r=a;a<n.length&&s>0;a++)n.charAt(a)==e.replace&&s--;return s=a,{begin:r,end:s}},f=function(){t(this).unbind("keypress.bzinputmask",k).unbind("input.bzinputmask",w).unbind("paste.bzinputmask",w).unbind("dragdrop.bzinputmask",w).unbind("drop.bzinputmask",w).unbind("keydown.bzinputmask",v).unbind("setvalue.bzinputmask",y).unbind("blur.bzinputmask",z)},p=function(){f.call(this),t(this).bindFirst("keypress.bzinputmask",k).bindFirst("input.bzinputmask",w).bindFirst("paste.bzinputmask",w).bindFirst("dragdrop.bzinputmask",w).bindFirst("drop.bzinputmask",w).bindFirst("keydown.bzinputmask",v).bindFirst("setvalue.bzinputmask",y).bind("blur.bzinputmask",z)},m=function(n,a){if(n&&(a||n.mask!=l.mask)){var r;a||(r=b(l.mask,n.mask,i.call(this))),a&&(this._valueSet?this._valueSet(a):this.value=a),t(this).bzinputmask(n.mask,t.extend(!0,e.bzinputmask,{insertMode:h})),a||i.call(this,r.begin,r.end)}return l=n,e.onMaskChange.call(this,n.obj,n.determined),!0},g=function(e,n,i){var a=d(n);return!(!a||a.obj!=l.obj||a.determined!=l.determined)||(a&&(f.call(this),i?(m.call(this,a),t(this).trigger(e)):(t(this).trigger(e),m.call(this,a)),p.call(this)),e.stopImmediatePropagation(),!1)},v=function(t){t=t||window.event;var n=t.which||t.charCode||t.keyCode;if(8==n||46==n||u&&127==n){var a=this._valueGet(),r=i.call(this);if(r.begin==r.end||!h&&r.begin==r.end-1){var s=r.begin;do{46!=n&&s--;var c=a.charAt(s);a=a.substring(0,s)+a.substring(s+1)}while(s>0&&s<a.length&&c!=o&&!e.match.test(c))}else{var l=a.substring(0,r.begin)+a.substring(r.end);l.search(e.match)==-1&&(a=l)}return g.call(this,t,a,!1)}return 45==n&&(h=!h),!0},k=function(t){var e=this._valueGet();t=t||window.event;var n=t.which||t.charCode||t.keyCode,a=String.fromCharCode(n);return caretPos=i.call(this),e=e.substring(0,caretPos.begin)+a+e.substring(caretPos.end),g.call(this,t,e,!0)},z=function(t){var e=d(this._valueGet());return m.call(this,e),p.call(this),!0},y=function(t){return A.call(this),t.stopImmediatePropagation(),!0},A=function(){var t;t=this._valueGet?this._valueGet():this.value;for(var e=d(t);!e&&t.length>0;)t=t.substr(0,t.length-1),e=d(t);m.call(this,e,t),p.call(this)},w=function(t){var e=this;return setTimeout(function(){A.call(e)},0),t.stopImmediatePropagation(),!0};switch(n){case"isCompleted":var j=d(this[0]._valueGet&&this[0]._valueGet()||this[0].value);return j&&j.completed;default:return this.each(function(){A.call(this)}),this}}}(jQuery);
!function(t){function e(e){return o?e.data("events"):t._data(e[0]).events}function n(t,n,i){var r=e(t),a=r[n];if(!o){var s=i?a.splice(a.delegateCount-1,1)[0]:a.pop();return void a.splice(i?0:a.delegateCount||0,0,s)}i?r.live.unshift(r.live.pop()):a.unshift(a.pop())}function i(e,i,r){var a=i.split(/\s+/);e.each(function(){for(var e=0;a.length>e;++e){var i=t.trim(a[e]).match(/[^\.]+/i)[0];n(t(this),i,r)}})}function r(e){t.fn[e+"First"]=function(){var n=t.makeArray(arguments),r=n.shift();return r&&(t.fn[e].apply(this,arguments),i(this,r)),this}}var a=t.fn.jquery.split("."),s=parseInt(a[0]),f=parseInt(a[1]),o=1>s||1==s&&7>f;r("bind"),r("one"),t.fn.delegateFirst=function(){var e=t.makeArray(arguments),n=e[1];return n&&(e.splice(0,2),t.fn.delegate.apply(this,arguments),i(this,n,!0)),this},t.fn.liveFirst=function(){var e=t.makeArray(arguments);return e.unshift(this.selector),t.fn.delegateFirst.apply(t(document),e),this},o||(t.fn.onFirst=function(e,n){var r=t(this),a="string"==typeof n;if(t.fn.on.apply(r,arguments),"object"==typeof e)for(type in e)e.hasOwnProperty(type)&&i(r,type,a);else"string"==typeof e&&i(r,e,a);return r})}(jQuery);
$.fn.bistrozakazWrapHide=function(){$("#bistrozakaz-wrap").data("disabled",!0).fadeOut(300)},$.fn.bistrozakazWrapShow=function(){$("#bistrozakaz-wrap").data("disabled",!1).fadeIn(300)},$.fn.bistrozakazButtonDisable=function(){$("#bistrozakaz-button").attr("disabled","disabled"),$("#bistrozakaz-contact").attr("disabled","disabled"),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazButtonEnable=function(){$("#bistrozakaz-button").removeAttr("disabled"),$("#bistrozakaz-contact").removeAttr("disabled"),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazMessageShow=function(){$("#bistrozakaz-message").fadeIn(300)},$.fn.bistrozakazMessageHide=function(){$("#bistrozakaz-message").fadeOut(300)},$.fn.bistrozakazCheckContactFill=function(){$("#bistrozakaz-contact").keyup()},$.fn.bistrozakazBZToggle=function(){$("#bistrozakaz-wrap").data("disabled")?($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow()):($.fn.bistrozakazMessageShow(),$.fn.bistrozakazWrapHide())},$.fn.bistrozakazOnlyDisabledRadioToggle=function(a){$("#bistrozakaz-wrap").data("disabled")&&!$(a.target).data("disabled")?($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow()):$(a.target).data("disabled")?($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),$.fn.bistrozakazButtonDisable()):($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),$.fn.bistrozakazButtonEnable())},$.fn.bistrozakazRadioToggle=function(){var a=$("input[name=sku_id][type=radio]","#cartform");"undefined"!=typeof a&&a.on("change",$.fn.bistrozakazOnlyDisabledRadioToggle)},$.fn.bistrozakazCheckSkuEnabled=function(){var a=$(".sku-feature","#cartform");if("undefined"!=typeof a&&"undefined"!=typeof bistrozakazFeatures.features){var t="";$.each(a,function(a,o){t+=$(o).data("feature-id")+":"+$(o).val()+";"});var o=bistrozakazFeatures.features[t];o&&($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),o.available?($.fn.bistrozakazButtonEnable(),console.log("wareId:"+o.id+" available")):($.fn.bistrozakazButtonDisable(),console.log("wareId:"+o.id+" NOT available")))}var e=$("input[name=sku_id][type=radio]","#cartform");"undefined"!=typeof e&&$("input[name=sku_id][type=radio]:checked").data("disabled")&&($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),$.fn.bistrozakazButtonDisable()),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazFeatureToggle=function(){var a=$(".sku-feature","#cartform");"undefined"!=typeof a&&"undefined"!=typeof bistrozakazFeatures.features&&a.on("change",function(){var t="";$.each(a,function(a,o){t+=$(o).data("feature-id")+":"+$(o).val()+";"});var o=bistrozakazFeatures.features[t];o&&($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),o.available?($.fn.bistrozakazButtonEnable(),console.log("wareId:"+o.id+" available")):($.fn.bistrozakazButtonDisable(),console.log("wareId:"+o.id+" NOT available")))}),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazStartRequest=function(){var a=$("#bistrozakaz-coax");$.fn.bistrozakazButtonDisable(),a.removeClass("hvr-buzz"),a.addClass("hvr-buzz-loading")},$.fn.bistrozakazComplete=function(){var a=$("#bistrozakaz-coax");$.fn.bistrozakazButtonEnable(),a.removeClass("hvr-buzz-loading"),a.addClass("hvr-buzz")},$.fn.bistrozakazSuccess=function(a){"ok"===a.status?($.fn.bistrozakazMakeMessage("bistrozakaz-success",a.data.message),$.fn.bistrozakazWrapHide(),$("#bistrozakaz-wrap").trigger("ok.bistrozakaz.order",a)):"fail"===a.status&&$.fn.bistrozakazMakeMessage("bistrozakaz-error",a.errors)},$.fn.bistrozakazRequestFailed=function(){$.fn.bistrozakazMakeMessage("bistrozakaz-fail","Что-то пошло не так :( Попробуйте позже.")},$.fn.bistrozakazMakeMessage=function(a,t){var o=void 0===a?"bistrozakaz-success":a,e=$("#bistrozakaz-message");e.removeClass(),e.find("p").remove(),e.addClass(o).prepend($("<p/>").html(t)).fadeIn(300)},$.fn.bistrozakazLsSetContact=function(a,t){var o=$.bistrozakaz.$mode;a.localStorage.set("contact."+o,t)},$.fn.bistrozakazIsContractDone=function(){return console.log("calling isContract done."),$.localStorage.isEmpty(lsContractKey)&&$.localStorage.set(lsContractKey,!1),!1},$.fn.bistrozakazLsCheckUsersContact=function(a){var t=$("#bistrozakaz-contact");if(!("1"==$.bistrozakaz.$wa_is_auth&&t.val().length>6)){var o=$.bistrozakaz.$mode;a.localStorage.isSet("contact."+o)&&(a.localStorage.isEmpty("contact."+o)||t.val(a.localStorage.get("contact."+o)))}};
!function(a){"use strict";function t(){return a.localStorage.isEmpty(f)&&a.localStorage.set(f,!1),b===!1||a.localStorage.get(f)}function e(){p.addClass("bistrozakaz-contract-on-fire")}function o(){var t=p.find("input:checked").length>=1;t&&(a.localStorage.set(f,t),p.fadeOut(270),u.keyup(),k.trigger("signed.bistrozakaz.contract"))}function s(){t()||p.show()}function r(t){if(t.preventDefault(),a(this).attr("disabled"))return!1;a.fn.bistrozakazStartRequest(),a.fn.bistrozakazLsSetContact(n,a(z.sSelectorContact).val());var e={contact:a(z.sSelectorContact).val(),metadata:c,_csrf:a('input[name="_csrf"]').val()};a.ajax({type:"POST",url:a.bistrozakaz.$wa_app_url+"bistrozakaz/?plugin=bistrozakaz&action=bistrozakaz",data:a(z.sSelectorFormId).serialize()+"&"+a.param(e),success:a.fn.bistrozakazSuccess,complete:function(){a.fn.bistrozakazComplete()},dataType:"json"})}var n,i={sAppStaticUrl:a.bistrozakaz.$wa_app_static_url,sDataPath:a.bistrozakaz.$wa_url+"wa-data/public/shop/bistrozakaz/"},c={},l=a.masksSort(a.masksLoad(i.sDataPath+"js/phone-codes.json"),["#"],/[0-9]|#/,"mask"),z={sSelectorSkuId:"input[name=sku_id]:checked",sSelectorFormId:"#cartform",sSelectorWrap:"#bistrozakaz-wrap",sSelectorWrapLoading:"#bistrozakaz-wrap-loading",sSelectorContact:"#bistrozakaz-contact",sSelectorButton:"#bistrozakaz-button"},k=a(z.sSelectorWrap),u=a(z.sSelectorContact),d=a(z.sSelectorButton),p=a("#bistrozakaz-contract"),b=k.data("contract-is-enabled"),f=a(z.sSelectorWrap).data("contract-localstorage-key"),S={bzinputmask:{definitions:{"#":{validator:"[0-9]",cardinality:1}},showMaskOnHover:!1,autoUnmask:!0,isComplete:function(a,o){console.log("calling isComplete");var s=t();o&&!s&&e(),o&&s?(d.removeAttr("disabled"),d.focus()):d.attr("disabled","disabled")}},match:/[0-9]/,replace:"#",list:l,listKey:"mask",onMaskChange:function(t,e){a(this).attr("placeholder",a(this).bzinputmask("getemptymask")),c=t}};window.BISTROZAKAZ={init:function(t){var e=a("input[name=sku_id][type=radio]","#cartform"),i=a(".sku-feature","#cartform");S=void 0==t?S:a.extend(S,t),n=a.initNamespaceStorage("bistrozakaz"),console.log("call bistrozakazCheckSkuEnabled from phone"),e.length>0&&a.fn.bistrozakazCheckSkuEnabled(),u.bzinputmasks(S),a(z.sSelectorButton).click(r),e.length>0&&a.fn.bistrozakazRadioToggle(),i&&a.fn.bistrozakazFeatureToggle(),a.fn.bistrozakazLsCheckUsersContact(n),u.keyup(),p.find("input[type=checkbox]").on("change",o),s()}}}(jQuery),BISTROZAKAZ.init();
