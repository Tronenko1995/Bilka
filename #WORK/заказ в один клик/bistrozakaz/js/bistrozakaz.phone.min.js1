!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t){var r,i,n,o=arguments.length,s=window[t],a=arguments,u=a[1];if(2>o)throw Error("Minimum 2 arguments must be given");if(e.isArray(u)){i={};for(var f in u){r=u[f];try{i[r]=JSON.parse(s.getItem(r))}catch(c){i[r]=s.getItem(r)}}return i}if(2!=o){try{i=JSON.parse(s.getItem(u))}catch(c){throw new ReferenceError(u+" is not defined in this storage")}for(var f=2;o-1>f;f++)if(i=i[a[f]],void 0===i)throw new ReferenceError([].slice.call(a,1,f+1).join(".")+" is not defined in this storage");if(e.isArray(a[f])){n=i,i={};for(var m in a[f])i[a[f][m]]=n[a[f][m]];return i}return i[a[f]]}try{return JSON.parse(s.getItem(u))}catch(c){return s.getItem(u)}}function r(t){var r,i,n=arguments.length,o=window[t],s=arguments,a=s[1],u=s[2],f={};if(2>n||!e.isPlainObject(a)&&3>n)throw Error("Minimum 3 arguments must be given or second parameter must be an object");if(e.isPlainObject(a)){for(var c in a)r=a[c],e.isPlainObject(r)?o.setItem(c,JSON.stringify(r)):o.setItem(c,r);return a}if(3==n)return"object"==typeof u?o.setItem(a,JSON.stringify(u)):o.setItem(a,u),u;try{i=o.getItem(a),null!=i&&(f=JSON.parse(i))}catch(m){}i=f;for(var c=2;n-2>c;c++)r=s[c],i[r]&&e.isPlainObject(i[r])||(i[r]={}),i=i[r];return i[s[c]]=s[c+1],o.setItem(a,JSON.stringify(f)),f}function i(t){var r,i,n=arguments.length,o=window[t],s=arguments,a=s[1];if(2>n)throw Error("Minimum 2 arguments must be given");if(e.isArray(a)){for(var u in a)o.removeItem(a[u]);return!0}if(2==n)return o.removeItem(a),!0;try{r=i=JSON.parse(o.getItem(a))}catch(f){throw new ReferenceError(a+" is not defined in this storage")}for(var u=2;n-1>u;u++)if(i=i[s[u]],void 0===i)throw new ReferenceError([].slice.call(s,1,u).join(".")+" is not defined in this storage");if(e.isArray(s[u]))for(var c in s[u])delete i[s[u][c]];else delete i[s[u]];return o.setItem(a,JSON.stringify(r)),!0}function n(t,r){var n=a(t);for(var o in n)i(t,n[o]);if(r)for(var o in e.namespaceStorages)u(o)}function o(r){var i=arguments.length,n=arguments,s=(window[r],n[1]);if(1==i)return 0==a(r).length;if(e.isArray(s)){for(var u=0;u<s.length;u++)if(!o(r,s[u]))return!1;return!0}try{var f=t.apply(this,arguments);e.isArray(n[i-1])||(f={totest:f});for(var u in f)if(!(e.isPlainObject(f[u])&&e.isEmptyObject(f[u])||e.isArray(f[u])&&!f[u].length)&&f[u])return!1;return!0}catch(c){return!0}}function s(r){var i=arguments.length,n=arguments,o=(window[r],n[1]);if(2>i)throw Error("Minimum 2 arguments must be given");if(e.isArray(o)){for(var a=0;a<o.length;a++)if(!s(r,o[a]))return!1;return!0}try{var u=t.apply(this,arguments);e.isArray(n[i-1])||(u={totest:u});for(var a in u)if(void 0===u[a]||null===u[a])return!1;return!0}catch(f){return!1}}function a(r){var i=arguments.length,n=window[r],o=arguments,s=(o[1],[]),a={};if(a=i>1?t.apply(this,o):n,a._cookie)for(var u in e.cookie())""!=u&&s.push(u.replace(a._prefix,""));else for(var f in a)s.push(f);return s}function u(t){if(!t||"string"!=typeof t)throw Error("First parameter must be a string");g?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var r={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return e.cookie&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),r.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=r,r}function f(e){if(!window[e])return!1;var t="jsapi";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(r){return!1}}var c="ls_",m="ss_",g=f("localStorage"),h={_type:"",_ns:"",_callMethod:function(e,t){var r=[this._type],t=Array.prototype.slice.call(t),i=t[0];return this._ns&&r.push(this._ns),"string"==typeof i&&-1!==i.indexOf(".")&&(t.shift(),[].unshift.apply(t,i.split("."))),[].push.apply(r,t),e.apply(this,r)},get:function(){return this._callMethod(t,arguments)},set:function(){var t=arguments.length,i=arguments,n=i[0];if(1>t||!e.isPlainObject(n)&&2>t)throw Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(n)&&this._ns){for(var o in n)r(this._type,this._ns,o,n[o]);return n}var s=this._callMethod(r,i);return this._ns?s[n.split(".")[0]]:s},remove:function(){if(arguments.length<1)throw Error("Minimum 1 argument must be given");return this._callMethod(i,arguments)},removeAll:function(e){return this._ns?(r(this._type,this._ns,{}),!0):n(this._type,e)},isEmpty:function(){return this._callMethod(o,arguments)},isSet:function(){if(arguments.length<1)throw Error("Minimum 1 argument must be given");return this._callMethod(s,arguments)},keys:function(){return this._callMethod(a,arguments)}};if(e.cookie){window.name||(window.name=Math.floor(1e8*Math.random()));var l={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(t,r){e.cookie(this._prefix+t,r,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(t){return e.cookie(this._prefix+t)},removeItem:function(t){return e.removeCookie(this._prefix+t)},clear:function(){for(var t in e.cookie())""!=t&&(!this._prefix&&-1===t.indexOf(c)&&-1===t.indexOf(m)||this._prefix&&0===t.indexOf(this._prefix))&&e.removeCookie(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};g||(window.localCookieStorage=e.extend({},l,{_prefix:c,_expires:3650}),window.sessionCookieStorage=e.extend({},l,{_prefix:m+window.name+"_"})),window.cookieStorage=e.extend({},l),e.cookieStorage=e.extend({},h,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return u(e)},g?(e.localStorage=e.extend({},h,{_type:"localStorage"}),e.sessionStorage=e.extend({},h,{_type:"sessionStorage"})):(e.localStorage=e.extend({},h,{_type:"localCookieStorage"}),e.sessionStorage=e.extend({},h,{_type:"sessionCookieStorage"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})}});
!function(e){void 0==e.fn.inputmask&&(e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,isComplete:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnHover:!0,numericInput:!1,radixPoint:".",definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:e.fn.val},e.fn.inputmask=function(t,n){function a(e){var t=document.createElement("input"),e="on"+e,n=e in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),t=null,n}function i(t){var a=P.aliases[t];return a?(a.alias&&i(a.alias),e.extend(!0,P,a),e.extend(!0,P,n),!0):!1}function r(){var t=!1,n=0;1==P.mask.length&&0==P.greedy&&(P.placeholder="");for(var a=e.map(P.mask.split(""),function(e,a){var i=[];if(e==P.escapeChar)t=!0;else if(e!=P.optionalmarker.start&&e!=P.optionalmarker.end||t){var r=P.definitions[e];if(r&&!t)for(var s=0;s<r.cardinality;s++)i.push(f(n+s));else i.push(e),t=!1;return n+=i.length,i}}),i=a.slice(),r=1;r<P.repeat&&P.greedy;r++)i=i.concat(a.slice());return i}function s(){var t=!1,n=!1,a=!1;return e.map(P.mask.split(""),function(e,i){var r=[];if(e==P.escapeChar)n=!0;else if(e!=P.optionalmarker.start||n){if(e!=P.optionalmarker.end||n){var s=P.definitions[e];if(s&&!n){for(var u=s.prevalidator,o=u?u.length:0,l=1;l<s.cardinality;l++){var f=o>=l?u[l-1]:[],c=f.validator,d=f.cardinality;r.push({fn:c?"string"==typeof c?new RegExp(c):new function(){this.test=c}:new RegExp("."),cardinality:d?d:1,optionality:t,newBlockMarker:1==t?a:!1,offset:0,casing:s.casing,def:e}),1==t&&(a=!1)}r.push({fn:s.validator?"string"==typeof s.validator?new RegExp(s.validator):new function(){this.test=s.validator}:new RegExp("."),cardinality:s.cardinality,optionality:t,newBlockMarker:a,offset:0,casing:s.casing,def:e})}else r.push({fn:null,cardinality:0,optionality:t,newBlockMarker:a,offset:0,casing:null,def:e}),n=!1;return a=!1,r}t=!1,a=!0}else t=!0,a=!0})}function u(e,t,n,a){if(0>e||e>=c())return!1;for(var i=l(e),r=t?1:0,s="",u=R[i].cardinality;u>r;u--)s+=m(n,i-(u-1));return t&&(s+=t),null!=R[i].fn?R[i].fn.test(s,n,e,a,P):!1}function o(e){var t=l(e),n=R[t];return void 0!=n?n.fn:!1}function l(e){return e%R.length}function f(e){return P.placeholder.charAt(e%P.placeholder.length)}function c(){var e=w.length;return!P.greedy&&P.repeat>1&&(e+=w.length*(P.repeat-1)),e}function d(e,t){var n=c();if(t>=n)return n;for(var a=t;++a<n&&!o(a););return a}function p(e,t){var n=t;if(0>=n)return 0;for(;--n>0&&!o(n););return n}function v(e,t,n){var a=R[l(t)],i=n;if(void 0!=i)switch(a.casing){case"upper":i=n.toUpperCase();break;case"lower":i=n.toLowerCase()}e[t]=i}function m(e,t,n){return n&&(t=h(e,t)),e[t]}function h(e,t,n){var a;if(n)for(;0>t&&e.length<c();)for(a=w.length-1,t=w.length;void 0!==w[a];)e.unshift(w[a--]);else for(;void 0==e[t]&&e.length<c();)for(a=0;void 0!==w[a];)e.push(w[a++]);return t}function g(e,t,n){e._valueSet(t.join("")),void 0!=n&&(D?setTimeout(function(){A(e,n)},100):A(e,n))}function k(e,t,n){for(var a=t,i=c();n>a&&i>a;a++)v(e,a,m(w.slice(),a))}function _(e,t){var n=l(t);v(e,t,m(w,n))}function y(t,n,a,i){var r=e(t).data("inputmask").isRTL,s=C(t._valueGet(),r).split("");if(r){var p=c(),h=s.reverse();h.length=p;for(var y=0;p>y;y++){var b=l(p-(y+1));null==R[b].fn&&h[y]!=m(w,b)?(h.splice(y,0,m(w,b)),h.length=p):h[y]=h[y]||m(w,b)}s=h.reverse()}k(n,0,n.length),n.length=w.length;for(var E,G=-1,A=-1,p=c(),M=s.length,S=0==M?p:-1,y=0;M>y;y++)for(var T=A+1;p>T;T++){if(o(T)){var D=s[y];(E=u(T,D,n,!a))!==!1?(E!==!0&&(T=E.pos||T,D=E.c||D),v(n,T,D),G=A=T):(_(n,T),D==f(T)&&(A=T,S=T));break}if(_(n,T),G==A&&(G=T),A=T,s[y]==m(n,T))break}if(0==P.greedy)for(var O=C(n.join(""),r).split("");n.length!=O.length;)r?n.shift():n.pop();return a&&g(t,n),r?P.numericInput?-1!=e.inArray(P.radixPoint,n)&&i!==!0?e.inArray(P.radixPoint,n):d(n,p):d(n,S):d(n,G)}function b(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")}function C(e,t){return t?e.replace(new RegExp("^("+b(w.join(""))+")*"),""):e.replace(new RegExp("("+b(w.join(""))+")*$"),"")}function E(t,n){y(t,n,!1);var a=n.slice();if(e(t).data("inputmask").isRTL)for(var i=0;i<=a.length-1;i++){var r=l(i);if(!R[r].optionality)break;if(f(i)!=n[i]&&o(i))break;a.splice(0,1)}else for(var i=a.length-1;i>=0;i--){var r=l(i);if(!R[r].optionality)break;if(f(i)!=n[i]&&o(i))break;a.pop()}g(t,a)}function G(t,n){var a=t[0];if(!R||n!==!0&&t.hasClass("hasDatepicker"))return a._valueGet();var i=w.slice();return y(a,i),e.map(i,function(e,t){return o(t)&&e!=m(w.slice(),t)?e:null}).join("")}function A(e,t,n){var a=e.jquery&&e.length>0?e[0]:e;if("number"!=typeof t){var i=D?r:null,r=null;if(null==i){if(a.setSelectionRange)t=a.selectionStart,n=a.selectionEnd;else if(document.selection&&document.selection.createRange){var s=document.selection.createRange();t=0-s.duplicate().moveStart("character",-1e5),n=t+s.text.length}i={begin:t,end:n}}return i}if(n="number"==typeof n?n:t,0==P.insertMode&&t==n&&n++,a.setSelectionRange)a.setSelectionRange(t,n);else if(a.createTextRange){var s=a.createTextRange();s.collapse(!0),s.moveEnd("character",n),s.moveStart("character",t),s.select()}a.focus(),D&&n!=a.selectionEnd&&(r={begin:t,end:n})}function M(t){function n(e){for(var t=!0,n=e._valueGet(),a=n.length,i=0;a>i;i++)if(o(i)&&n.charAt(i)==f(i)){t=!1;break}return t}function a(t){var n=e._data(t).events;e.each(n,function(n,a){e(t).bind(n+".inputmask",function(e){return this.readOnly||this.disabled?(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1):void 0});for(var i=a[a.length-1],r=a.length-1;r>0;r--)a[r]=a[r-1];a[0]=i})}function i(t){var n;Object.getOwnPropertyDescriptor&&(n=Object.getOwnPropertyDescriptor(t,"value")),n&&n.get?t._valueGet||(t._valueGet=n.get,t._valueSet=n.set,Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("inputmask");return n&&n.autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=n._buffer.join("")?this._valueGet():""},set:function(t){this._valueSet(t),e(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&t.__lookupGetter__("value")?t._valueGet||(t._valueGet=t.__lookupGetter__("value"),t._valueSet=t.__lookupSetter__("value"),t.__defineGetter__("value",function(){var t=e(this),n=e(this).data("inputmask");return n&&n.autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=n._buffer.join("")?this._valueGet():""}),t.__defineSetter__("value",function(t){this._valueSet(t),e(this).triggerHandler("setvalue.inputmask")})):(t._valueGet||(t._valueGet=function(){return this.value},t._valueSet=function(e){this.value=e}),1!=e.fn.val.inputmaskpatch&&(e.fn.val=function(){if(0==arguments.length){var t=e(this);if(t.data("inputmask")){if(t.data("inputmask").autoUnmask)return t.inputmask("unmaskedvalue");var n=e.inputmask.val.apply(t);return n!=t.data("inputmask")._buffer.join("")?n:""}return e.inputmask.val.apply(t)}var a=arguments;return this.each(function(){var t=e(this),n=e.inputmask.val.apply(t,a);return t.data("inputmask")&&t.triggerHandler("setvalue.inputmask"),n})},e.extend(e.fn.val,{inputmaskpatch:!0})))}function r(e,t,n){for(;!o(e)&&e-1>=0;)e--;for(var a=e;t>a&&a<c();a++)if(o(a)){_(I,a);var i=d(I,a),r=m(I,i);if(r!=f(i)){if(i<c()&&u(a,r,I,!0)!==!1&&R[l(a)].def==R[l(i)].def)v(I,a,m(I,i)),_(I,i);else if(o(a))break}else if(void 0==n)break}else _(I,a);return void 0!=n&&v(I,H?t:p(I,t),n),I=C(I.join(""),H).split(""),0==I.length&&(I=w.slice()),e}function s(e,t,n,a){for(var i=e;t>=i&&i<c();i++)if(o(i)){var r=m(I,i);if(v(I,i,n),r!=f(i)){var s=d(I,i);if(!(s<c()))break;if(u(s,r,I,!0)!==!1&&R[l(i)].def==R[l(s)].def)n=r;else{if(o(s))break;n=r}}else if(a!==!0)break}else _(I,i);var p=I.length;return I=C(I.join(""),H).split(""),0==I.length&&(I=w.slice()),t-(p-I.length)}function b(t){L=!1;var n=this,a=t.keyCode,i=A(n);if(P.numericInput){var u=n._valueGet(),o=u.indexOf(P.radixPoint);-1!=o&&(H=i.begin<=o||i.end<=o)}if(a==P.keyCode.BACKSPACE||a==P.keyCode.DELETE||T&&127==a){var l=c();if(0==i.begin&&i.end==l)I=w.slice(),g(n,I),A(n,y(n,I,!1));else if(i.end-i.begin>1||i.end-i.begin==1&&P.insertMode)k(I,i.begin,i.end),g(n,I,H?y(n,I,!1):i.begin);else{var p=i.begin-(a==P.keyCode.DELETE?0:1);K>p&&a==P.keyCode.DELETE&&(p=K),p>=K&&(P.numericInput&&P.greedy&&a==P.keyCode.DELETE&&I[p]==P.radixPoint&&(p=d(I,p),H=!1),H?(p=s(K,p,f(p),!0),p=P.numericInput&&P.greedy&&a==P.keyCode.BACKSPACE&&I[p+1]==P.radixPoint?p+1:d(I,p)):p=r(p,l),g(n,I,p))}return n._valueGet()==w.join("")&&e(n).trigger("cleared"),!1}if(a==P.keyCode.END||a==P.keyCode.PAGE_DOWN)return setTimeout(function(){var e=y(n,I,!1,!0);P.insertMode||e!=c()||t.shiftKey||e--,A(n,t.shiftKey?i.begin:e,e)},0),!1;if(a==P.keyCode.HOME||a==P.keyCode.PAGE_UP)return A(n,0,t.shiftKey?i.begin:0),!1;if(a==P.keyCode.ESCAPE)return n._valueSet(j),A(n,0,y(n,I)),!1;if(a==P.keyCode.INSERT)return P.insertMode=!P.insertMode,A(n,P.insertMode||i.begin!=c()?i.begin:i.begin-1),!1;if(t.ctrlKey&&88==a)setTimeout(function(){A(n,y(n,I,!0))},0);else if(!P.insertMode){if(a==P.keyCode.RIGHT){var v=i.begin==i.end?i.end+1:i.end;return v=v<c()?v:i.end,A(n,t.shiftKey?i.begin:v,t.shiftKey?v+1:v),!1}if(a==P.keyCode.LEFT){var v=i.begin-1;return v=v>0?v:0,A(n,v,t.shiftKey?i.end:v),!1}}P.onKeyDown.call(this,t,P),U=-1!=e.inArray(a,P.ignorables)}function G(t){if(L)return!1;L=!0;var a=this,i=e(a);t=t||window.event;var o=t.which||t.charCode||t.keyCode;if(P.numericInput&&o==P.radixPoint.charCodeAt(P.radixPoint.length-1)){var l=a._valueGet(),_=l.indexOf(P.radixPoint);A(a,d(I,-1!=_?_:c()))}if(t.ctrlKey||t.altKey||t.metaKey||U)return!0;if(o){i.trigger("input");var y=A(a),b=String.fromCharCode(o),C=c();if(k(I,y.begin,y.end),H){var E,G=P.numericInput?y.end:p(I,y.end);if((E=u(G==C||m(I,G)==P.radixPoint?p(I,G):G,b,I,!1))!==!1){E!==!0&&(G=E.pos||y,b=E.c||b);var M=K;if(1==P.insertMode){if(1==P.greedy)for(var S=I.slice();m(S,M,!0)!=f(M)&&G>=M;)M=M==C?C+1:d(I,M);if(!(G>=M&&(P.greedy||I.length<C)))return!1;if(I[K]!=f(K)&&I.length<C){var T=h(I,-1,H);0!=y.end&&(G+=T),C=I.length}r(M,P.numericInput?p(I,G):G,b)}else v(I,P.numericInput?p(I,G):G,b);g(a,I,P.numericInput&&0==G?d(I,G):G),setTimeout(function(){n(a)&&i.trigger("complete")},0)}else D&&g(a,I,y.begin)}else{var E,G=d(I,y.begin-1);if(h(I,G,H),(E=u(G,b,I,!1))!==!1){if(E!==!0&&(G=E.pos||G,b=E.c||b),1==P.insertMode){for(var O=c(),S=I.slice();m(S,O,!0)!=f(O)&&O>=G;)O=0==O?-1:p(I,O);if(!(O>=G))return!1;s(G,I.length,b)}else v(I,G,b);var x=d(I,G);g(a,I,x),setTimeout(function(){n(a)&&i.trigger("complete")},0)}else D&&g(a,I,y.begin)}return!1}}function M(t){var a=e(this),i=this,r=t.keyCode;a.trigger("isComplete",n(i)),P.onKeyUp.call(this,t,P),r==P.keyCode.TAB&&a.hasClass("focus.inputmask")&&0==i._valueGet().length&&(I=w.slice(),g(i,I),H||A(i,0),j=i._valueGet())}var O=e(t);if(O.is(":input")){P.greedy=P.greedy?P.greedy:0==P.repeat;var x=O.prop("maxLength");c()>x&&x>-1&&(x<w.length&&(w.length=x),0==P.greedy&&(P.repeat=Math.round(x/w.length))),O.prop("maxLength",2*c()),O.data("inputmask",{tests:R,_buffer:w,greedy:P.greedy,repeat:P.repeat,autoUnmask:P.autoUnmask,definitions:P.definitions,isRTL:!1}),i(t);var I=w.slice(),j=t._valueGet(),L=!1,U=!1,N=-1,K=d(I,-1),H=(p(I,c()),!1);if("rtl"==t.dir||P.numericInput){t.dir="ltr",O.css("text-align","right"),O.removeAttr("dir");var B=O.data("inputmask");B.isRTL=!0,O.data("inputmask",B),H=!0}O.unbind(".inputmask"),O.removeClass("focus.inputmask"),O.bind("mouseenter.inputmask",function(){var t=e(this),n=this;if(!t.hasClass("focus.inputmask")&&P.showMaskOnHover){var a=n._valueGet().length;a<I.length&&(0==a&&(I=w.slice()),g(n,I))}}).bind("blur.inputmask",function(){var t=e(this),a=this,i=a._valueGet();t.removeClass("focus.inputmask"),i!=j&&t.change(),P.clearMaskOnLostFocus&&(i==w.join("")?a._valueSet(""):E(a,I)),n(a)||(t.trigger("incomplete"),P.clearIncomplete&&(P.clearMaskOnLostFocus?a._valueSet(""):(I=w.slice(),g(a,I))))}).bind("focus.inputmask",function(){var t=e(this),n=this;if(!t.hasClass("focus.inputmask")&&!P.showMaskOnHover){var a=n._valueGet().length;a<I.length&&(0==a&&(I=w.slice()),A(n,y(n,I,!0)))}t.addClass("focus.inputmask"),j=n._valueGet()}).bind("mouseleave.inputmask",function(){var t=e(this),n=this;P.clearMaskOnLostFocus&&(t.hasClass("focus.inputmask")||(n._valueGet()==w.join("")||""==n._valueGet()?n._valueSet(""):E(n,I)))}).bind("click.inputmask",function(){var e=this;setTimeout(function(){var t=A(e);if(t.begin==t.end){var n=t.begin;N=y(e,I,!1),H?A(e,n>N&&(u(n,I[n],I,!0)!==!1||!o(n))?n:N):A(e,N>n&&(u(n,I[n],I,!0)!==!1||!o(n))?n:N)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){A(e,0,N)},0)}).bind("keydown.inputmask",b).bind("keypress.inputmask",G).bind("keyup.inputmask",M).bind(S+".inputmask, dragdrop.inputmask, drop.inputmask",function(){var e=this;setTimeout(function(){A(e,y(e,I,!0))},0)}).bind("setvalue.inputmask",function(){var e=this;j=e._valueGet(),y(e,I,!0),e._valueGet()==w.join("")&&e._valueSet("")}).bind("complete.inputmask",P.oncomplete).bind("incomplete.inputmask",P.onincomplete).bind("cleared.inputmask",P.oncleared).bind("isComplete.inputmask",P.isComplete),N=y(t,I,!0);var F;try{F=document.activeElement}catch(W){}F===t?(O.addClass("focus.inputmask"),A(t,N)):P.clearMaskOnLostFocus&&(t._valueGet()==w.join("")?t._valueSet(""):E(t,I)),a(t)}}var P=e.extend(!0,{},e.inputmask.defaults,n),S=a("paste")?"paste":"input",T=null!=navigator.userAgent.match(/iphone/i),D=null!=navigator.userAgent.match(/android.*mobile safari.*/i);if(D){var O=navigator.userAgent.match(/mobile safari.*/i),x=parseInt(new RegExp(/[0-9]+/).exec(O));D=533>=x}if("string"==typeof t)switch(t){case"mask":var w=r(),R=s();return this.each(function(){M(this)});case"isComplete":return!1;case"unmaskedvalue":var R=this.data("inputmask").tests,w=this.data("inputmask")._buffer;return P.greedy=this.data("inputmask").greedy,P.repeat=this.data("inputmask").repeat,P.definitions=this.data("inputmask").definitions,G(this);case"remove":var R,w;return this.each(function(){var t=e(this),n=this;setTimeout(function(){if(t.data("inputmask")){R=t.data("inputmask").tests,w=t.data("inputmask")._buffer,P.greedy=t.data("inputmask").greedy,P.repeat=t.data("inputmask").repeat,P.definitions=t.data("inputmask").definitions,n._valueSet(G(t,!0)),t.removeData("inputmask"),t.unbind(".inputmask"),t.removeClass("focus.inputmask");var e;Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(n,"value")),e&&e.get?n._valueGet&&Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet}):document.__lookupGetter__&&n.__lookupGetter__("value")&&n._valueGet&&(n.__defineGetter__("value",n._valueGet),n.__defineSetter__("value",n._valueSet)),delete n._valueGet,delete n._valueSet}},0)});case"getemptymask":return this.data("inputmask")?this.data("inputmask")._buffer.join(""):"";case"hasMaskedValue":return this.data("inputmask")?!this.data("inputmask").autoUnmask:!1;default:i(t)||(P.mask=t);var w=r(),R=s();return this.each(function(){M(this)})}if("object"==typeof t){P=e.extend(!0,{},e.inputmask.defaults,t),i(P.alias);var w=r(),R=s();return this.each(function(){M(this)})}})}(jQuery);
!function(t){t.masksLoad=function(e){var n;return t.ajax({url:e,async:!1,dataType:"json",success:function(t){n=t}}),n},t.masksSort=function(e,n,i,a){return e.sort(function(e,r){for(var s=0,c=0;s<e[a].length&&c<r[a].length;){var u=e[a].charAt(s),l=r[a].charAt(c);if(i.test(u))if(i.test(l)){if(-1!=t.inArray(u,n)&&-1==t.inArray(l,n))return 1;if(-1==t.inArray(u,n)&&-1!=t.inArray(l,n))return-1;if(-1==t.inArray(u,n)&&-1==t.inArray(l,n)&&u!=l)return l>u?-1:1;s++,c++}else c++;else s++}for(;s<e[a].length||c<r[a].length;)if(s<e[a].length&&!i.test(e[a].charAt(s)))s++;else if(c<r[a].length&&!i.test(r[a].charAt(c)))c++;else{if(s<e[a].length)return 1;if(c<r[a].length)return-1}return 0}),e},t.fn.inputmasks=function(e,n){var i=function(t,e){if("number"!=typeof t){if(this.setSelectionRange)t=this.selectionStart,e=this.selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length}return{begin:t,end:e}}if(e="number"==typeof e?e:t,this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select()}},a=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)e[e.length]=n;return e};e=t.extend(!0,{onMaskChange:t.noop},e);var r={};for(var s in e.inputmask.definitions){var c=e.inputmask.definitions[s].validator;switch(typeof c){case"string":r[s]=new RegExp(c);break;case"object":"test"in e.definitions[s].validator&&(r[s]=c);break;case"function":r[s]={test:c}}}e.inputmask.definitions[e.replace]={validator:e.match.source,cardinality:1};var u=null!=navigator.userAgent.match(/iphone/i),l=!1,o=t.extend(!0,{},t.inputmask.defaults,e.inputmask).placeholder,h=t.extend(!0,{},t.inputmask.defaults,e.inputmask).insertMode,d=function(t){for(var n="",i=0;i<t.length;i++){var s=t.charAt(i);if(s==o)break;e.match.test(s)&&(n+=s)}for(var c in e.list){for(var u=e.list[c][e.listKey],l=!0,h=0,d=0;h<n.length&&d<u.length;){var f=u.charAt(d),p=n.charAt(h);if(e.match.test(f)||f in r){if(!(f in r&&r[f].test(p)||p==f)){l=!1;break}h++,d++}else d++}if(l&&h==n.length){var m=-1==u.substr(d).search(e.match);u=u.replace(new RegExp([e.match.source].concat(a(r)).join("|"),"g"),e.replace);var g=-1==u.substr(d).search(e.replace);return{mask:u,obj:e.list[c],determined:m,completed:g}}}return!1},f=function(t,n,i){if(!t)return 0;for(var a=0,r=0;a<i.begin;a++)t.charAt(a)==e.replace&&r++;for(var s=0;a<i.end;a++)t.charAt(a)==e.replace&&s++;for(a=0;a<n.length&&(r>0||n.charAt(a)!=e.replace);a++)n.charAt(a)==e.replace&&r--;for(r=a;a<n.length&&s>0;a++)n.charAt(a)==e.replace&&s--;return s=a,{begin:r,end:s}},p=function(){t(this).unbind("keypress.inputmask",k).unbind("input.inputmask",j).unbind("paste.inputmask",j).unbind("dragdrop.inputmask",j).unbind("drop.inputmask",j).unbind("keydown.inputmask",b).unbind("setvalue.inputmask",A).unbind("blur.inputmask",y)},m=function(){p.call(this),t(this).bindFirst("keypress.inputmask",k).bindFirst("input.inputmask",j).bindFirst("paste.inputmask",j).bindFirst("dragdrop.inputmask",j).bindFirst("drop.inputmask",j).bindFirst("keydown.inputmask",b).bindFirst("setvalue.inputmask",A).bind("blur.inputmask",y)},g=function(n,a){if(n&&(a||n.mask!=l.mask)){var r;a||(r=f(l.mask,n.mask,i.call(this))),a&&(this._valueSet?this._valueSet(a):this.value=a),t(this).inputmask(n.mask,t.extend(!0,e.inputmask,{insertMode:h})),a||i.call(this,r.begin,r.end)}return l=n,e.onMaskChange.call(this,n.obj,n.determined),!0},v=function(e,n,i){var a=d(n);return a&&a.obj==l.obj&&a.determined==l.determined?!0:(a&&(p.call(this),i?(g.call(this,a),t(this).trigger(e)):(t(this).trigger(e),g.call(this,a)),m.call(this)),e.stopImmediatePropagation(),!1)},b=function(t){t=t||window.event;var n=t.which||t.charCode||t.keyCode;if(8==n||46==n||u&&127==n){var a=this._valueGet(),r=i.call(this);if(r.begin==r.end||!h&&r.begin==r.end-1){var s=r.begin;do{46!=n&&s--;var c=a.charAt(s);a=a.substring(0,s)+a.substring(s+1)}while(s>0&&s<a.length&&c!=o&&!e.match.test(c))}else{var l=a.substring(0,r.begin)+a.substring(r.end);-1==l.search(e.match)&&(a=l)}return v.call(this,t,a,!1)}return 45==n&&(h=!h),!0},k=function(t){var e=this._valueGet();t=t||window.event;var n=t.which||t.charCode||t.keyCode,a=String.fromCharCode(n);return caretPos=i.call(this),e=e.substring(0,caretPos.begin)+a+e.substring(caretPos.end),v.call(this,t,e,!0)},y=function(t){var e=d(this._valueGet());return g.call(this,e),m.call(this),!0},A=function(t){return w.call(this),t.stopImmediatePropagation(),!0},w=function(){var t;t=this._valueGet?this._valueGet():this.value;for(var e=d(t);!e&&t.length>0;)t=t.substr(0,t.length-1),e=d(t);g.call(this,e,t),m.call(this)},j=function(t){var e=this;return setTimeout(function(){w.call(e)},0),t.stopImmediatePropagation(),!0};switch(n){case"isCompleted":var x=d(this[0]._valueGet&&this[0]._valueGet()||this[0].value);return x&&x.completed;default:return this.each(function(){w.call(this)}),this}}}(jQuery);
!function(t){function e(e){return u?e.data("events"):t._data(e[0]).events}function n(t,n,r){var i=e(t),a=i[n];if(!u){var s=r?a.splice(a.delegateCount-1,1)[0]:a.pop();return void a.splice(r?0:a.delegateCount||0,0,s)}r?i.live.unshift(i.live.pop()):a.unshift(a.pop())}function r(e,r,i){var a=r.split(/\s+/);e.each(function(){for(var e=0;a.length>e;++e){var r=t.trim(a[e]).match(/[^\.]+/i)[0];n(t(this),r,i)}})}function i(e){t.fn[e+"First"]=function(){var n=t.makeArray(arguments),i=n.shift();return i&&(t.fn[e].apply(this,arguments),r(this,i)),this}}var a=t.fn.jquery.split("."),s=parseInt(a[0]),f=parseInt(a[1]),u=1>s||1==s&&7>f;i("bind"),i("one"),t.fn.delegateFirst=function(){var e=t.makeArray(arguments),n=e[1];return n&&(e.splice(0,2),t.fn.delegate.apply(this,arguments),r(this,n,!0)),this},t.fn.liveFirst=function(){var e=t.makeArray(arguments);return e.unshift(this.selector),t.fn.delegateFirst.apply(t(document),e),this},u||(t.fn.onFirst=function(e,n){var i=t(this),a="string"==typeof n;if(t.fn.on.apply(i,arguments),"object"==typeof e)for(type in e)e.hasOwnProperty(type)&&r(i,type,a);else"string"==typeof e&&r(i,e,a);return i})}(jQuery);
$.fn.bistrozakazWrapHide=function(){$("#bistrozakaz-wrap").data("disabled",!0).fadeOut(300)},$.fn.bistrozakazWrapShow=function(){$("#bistrozakaz-wrap").data("disabled",!1).fadeIn(300)},$.fn.bistrozakazButtonDisable=function(){$("#bistrozakaz-button").attr("disabled","disabled"),$("#bistrozakaz-contact").attr("disabled","disabled"),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazButtonEnable=function(){$("#bistrozakaz-button").removeAttr("disabled"),$("#bistrozakaz-contact").removeAttr("disabled"),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazMessageShow=function(){$("#bistrozakaz-message").fadeIn(300)},$.fn.bistrozakazMessageHide=function(){$("#bistrozakaz-message").fadeOut(300)},$.fn.bistrozakazCheckContactFill=function(){$("#bistrozakaz-contact").keyup()},$.fn.bistrozakazBZToggle=function(){$("#bistrozakaz-wrap").data("disabled")?($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow()):($.fn.bistrozakazMessageShow(),$.fn.bistrozakazWrapHide())},$.fn.bistrozakazOnlyDisabledRadioToggle=function(a){$("#bistrozakaz-wrap").data("disabled")&&!$(a.target).data("disabled")?($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow()):$(a.target).data("disabled")?($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),$.fn.bistrozakazButtonDisable()):($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),$.fn.bistrozakazButtonEnable())},$.fn.bistrozakazRadioToggle=function(){var a=$("input[name=sku_id][type=radio]","#cart-form");"undefined"!=typeof a&&a.on("change",$.fn.bistrozakazOnlyDisabledRadioToggle)},$.fn.bistrozakazCheckSkuEnabled=function(){var a=$(".sku-feature","#cart-form");if("undefined"!=typeof a&&"undefined"!=typeof bistrozakazFeatures.features){var t="";$.each(a,function(a,e){t+=$(e).data("feature-id")+":"+$(e).val()+";"});var e=bistrozakazFeatures.features[t];e&&($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),e.available?($.fn.bistrozakazButtonEnable(),console.log("wareId:"+e.id+" available")):($.fn.bistrozakazButtonDisable(),console.log("wareId:"+e.id+" NOT available")))}var o=$("input[name=sku_id][type=radio]","#cart-form");"undefined"!=typeof o&&$("input[name=sku_id][type=radio]:checked").data("disabled")&&($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),$.fn.bistrozakazButtonDisable()),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazFeatureToggle=function(){var a=$(".sku-feature","#cart-form");"undefined"!=typeof a&&"undefined"!=typeof bistrozakazFeatures.features&&a.on("change",function(){var t="";$.each(a,function(a,e){t+=$(e).data("feature-id")+":"+$(e).val()+";"});var e=bistrozakazFeatures.features[t];e&&($.fn.bistrozakazMessageHide(),$.fn.bistrozakazWrapShow(),e.available?($.fn.bistrozakazButtonEnable(),console.log("wareId:"+e.id+" available")):($.fn.bistrozakazButtonDisable(),console.log("wareId:"+e.id+" NOT available")))}),$.fn.bistrozakazCheckContactFill()},$.fn.bistrozakazStartRequest=function(){var a=$("#bistrozakaz-coax");$.fn.bistrozakazButtonDisable(),a.removeClass("hvr-buzz"),a.addClass("hvr-buzz-loading")},$.fn.bistrozakazComplete=function(){var a=$("#bistrozakaz-coax");$.fn.bistrozakazButtonEnable(),a.removeClass("hvr-buzz-loading"),a.addClass("hvr-buzz")},$.fn.bistrozakazSuccess=function(a){"ok"==a.status?($.fn.bistrozakazMakeMessage("bistrozakaz-success",a.data.message),$.fn.bistrozakazWrapHide()):"fail"==a.status&&$.fn.bistrozakazMakeMessage("bistrozakaz-error",a.errors)},$.fn.bistrozakazRequestFailed=function(){$.fn.bistrozakazMakeMessage("bistrozakaz-fail","Что-то пошло не так :( Попробуйте позже.")},$.fn.bistrozakazMakeMessage=function(a,t){var e=void 0===a?"bistrozakaz-success":a,o=$("#bistrozakaz-message");o.removeClass(),o.find("p").remove(),o.addClass(e).prepend($("<p/>").html(t)).fadeIn(300)},$.fn.bistrozakazLsSetContact=function(a,t){var e=$.bistrozakaz.$mode;a.localStorage.set("contact."+e,t)},$.fn.bistrozakazLsCheckUsersContact=function(a){var t=$("#bistrozakaz-contact");if(!("1"==$.bistrozakaz.$wa_is_auth&&t.val().length>6)){var e=$.bistrozakaz.$mode;a.localStorage.isSet("contact."+e)&&(a.localStorage.isEmpty("contact."+e)||t.val(a.localStorage.get("contact."+e)))}};
!function(a){"use strict";function t(t){if(t.preventDefault(),a(this).attr("disabled"))return!1;a.fn.bistrozakazStartRequest(),a.fn.bistrozakazLsSetContact(e,a(i.sSelectorContact).val());var o={contact:a(i.sSelectorContact).val(),metadata:s,_csrf:a('input[name="_csrf"]').val()};a.ajax({type:"POST",url:a.bistrozakaz.$wa_app_url+"bistrozakaz/?plugin=bistrozakaz&action=bistrozakaz",data:a(i.sSelectorFormId).serialize()+"&"+a.param(o),success:a.fn.bistrozakazSuccess,complete:function(){a.fn.bistrozakazComplete()},dataType:"json"})}var e,o={sAppStaticUrl:a.bistrozakaz.$wa_app_static_url,sDataPath:a.bistrozakaz.$wa_url+"wa-data/public/shop/bistrozakaz/"},s={},r=a.masksSort(a.masksLoad(o.sDataPath+"js/phone-codes.json"),["#"],/[0-9]|#/,"mask"),i={sSelectorSkuId:"input[name=sku_id]:checked",sSelectorFormId:"#cart-form",sSelectorWrap:"#bistrozakaz-wrap",sSelectorWrapLoading:"#bistrozakaz-wrap-loading",sSelectorContact:"#bistrozakaz-contact",sSelectorButton:"#bistrozakaz-button"},n={inputmask:{definitions:{"#":{validator:"[0-9]",cardinality:1}},showMaskOnHover:!1,autoUnmask:!0,isComplete:function(t,e){console.log("calling isComplete");var o=a(i.sSelectorButton);e?(o.removeAttr("disabled"),o.focus()):o.attr("disabled","disabled")}},match:/[0-9]/,replace:"#",list:r,listKey:"mask",onMaskChange:function(t,e){a(this).attr("placeholder",a(this).inputmask("getemptymask")),s=t}};window.BISTROZAKAZ={init:function(o){var s=a("input[name=sku_id][type=radio]","#cart-form"),r=a(".sku-feature","#cart-form");n=void 0==o?n:a.extend(n,o),e=a.initNamespaceStorage("bistrozakaz"),console.log("call bistrozakazCheckSkuEnabled from phone"),s.length>0&&a.fn.bistrozakazCheckSkuEnabled(),a(i.sSelectorContact).inputmasks(n),a(i.sSelectorButton).click(t),s.length>0&&a.fn.bistrozakazRadioToggle(),r&&a.fn.bistrozakazFeatureToggle(),a.fn.bistrozakazLsCheckUsersContact(e),a(i.sSelectorContact).keyup()}}}(jQuery),BISTROZAKAZ.init();
